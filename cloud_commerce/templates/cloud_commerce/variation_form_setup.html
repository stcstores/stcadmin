{% extends "cloud_commerce/variation_wizard.html" %}

{% block table_class %}new_product_form{% endblock %}

{% block form %}
{{ form.non_field_errors }}
    {% csrf_token %}
    <thead>
        <tr>
            <th></th>
            <th></th>
            <th>Variable</th>
            <th></th>
        </tr>
    </thead>
    {% for field in form %}
        {% ifnotequal field.name|slice:"0:10" 'variation_' %}
        {% ifnotequal field.name|slice:"0:9" 'variable_' %}
        {% ifnotequal field.name|slice:"0:4" 'opt_' %}
            <tr>
                <td><label for="{{ field.name }}">{{ field.label }}</label></td>
                <td>{{ field }}<br>{{ field.help_text }}</td>
                <td>{% for var_field in form %}{% ifequal var_field.name 'variable_'|add:field.name %}{{ var_field }}{% endifequal %}{% endfor %}</td>
                {% if field.errors %}
                    <td class="error">{{ field.errors }}</td>
                {% else %}
                    <td></td>
                {% endif %}
            </tr>

        {% endifnotequal %}{% endifnotequal %}{% endifnotequal %}
    {% endfor %}
<table class="variation_options_table">
{% for field in form %}
{% ifequal field.name|slice:"0:4" 'opt_' %}
<tr>
    <td>{{ field.label }}</td>
    {% for choice in field %}
        <td>{{ choice }}</td>
    {% endfor %}
    {% if field.errors %}
        <td class="error">{{ field.errors }}</td>
    {% else %}
        <td></td>
    {% endif %}
</tr>
{% endifequal %}
{% endfor %}
{% endblock %}
