{% extends 'orders/base.html' %}

{% block content %}

<div class="undispatched">
    <div class="order_type" id="urgent">
        <div class="order_count" id="urgent_count">
            <div class="name">Urgent:</div>
            <div class="count">{{ urgent|length }}</div>
            <div class="toggle" id="urgent_toggle">&#9658;</div>
        </div>
        <div class="order_ids" id="urgent_ids">
            {% for order_ID in urgent %}
            <div class="order_id">{{ order_ID }}</div>
            {% endfor %}
        </div>
    </div>
    <div class="order_type" id="priority">
        <div class="order_count" id="priority_count">
            <div class="name">Priority:</div>
            <div class="count">{{ priority|length }}</div>                
            <div class="toggle" id="priority_toggle">&#9658;</div>
        </div>
        <div class="order_ids" id="priority_ids">
            {% for order_ID in priority %}
            <div class="order_id">{{ order_ID }}</div>
            {% endfor %}
        </div>
    </div>
    <div class="order_type" id="non_priority">
        <div class="order_count" id="non_priority_count">
            <div class="name">Non-Priority:</div>
            <div class="count">{{ non_priority|length }}</div>
            <div class="toggle" id="non_priority_toggle">&#9658;</div>
        </div>
        <div class="order_ids" id="non_priority_ids">
            {% for order_ID in non_priority %}
            <div class="order_id">{{ order_ID }}</div>
            {% endfor %}
        </div>
    </div>
    <div class="order_type">
        <div class="order_count">
            <div class="name">Total:</div>
            <div class="count">{{ total }}</div>
        </div>
    </div>
</div>

{% endblock content %}

{% block script %}
<script>
    closed_arrow = "&#9658;";
    open_arrow = "&#9660;";
    show_urgent = true;
    show_priority = true;
    show_non_priority=true;

    function show_orders(type_name) {
        $('#' + type_name + '_ids').show();
        $('#' + type_name + '_toggle').html(open_arrow);
    }

    function hide_orders(type_name) {
        $('#' + type_name + '_ids').hide();
        $('#' + type_name + '_toggle').html(closed_arrow);
    }

    function toggle_urgent() {
        if (show_urgent === true) {
            show_urgent = false;
            hide_orders('urgent');
        } else {
            show_urgent = true;
            show_orders('urgent');
        }
    }

    function toggle_priority() {
        if (show_priority === true) {
            show_priority = false;
            hide_orders('priority');
        } else {
            show_priority = true;
            show_orders('priority');
        }
    }

    function toggle_non_priority() {
        if (show_non_priority === true) {
            show_non_priority = false;
            hide_orders('non_priority');
        } else {
            show_non_priority = true;
            show_orders('non_priority');
        }
    }

    $(document).ready(function() {
        toggle_urgent();
        toggle_priority();
        toggle_non_priority();
        $('#urgent_count').click(function() {
            toggle_urgent();
        });
        $('#priority_count').click(function() {
            toggle_priority();
        });
        $('#non_priority_count').click(function() {
            toggle_non_priority();
        });
    });
</script>
{% endblock script %}
