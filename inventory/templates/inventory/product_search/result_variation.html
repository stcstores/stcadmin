{% load inventory_extras %}

<div class="collapsed" id="collapsed_{{ range.range_ID }}">
  <button class="expand_variations" id="expand_{{ range.range_ID }}">
    Show {{ range.product_set.count }} Variations &#9660;
  </button>
</div>

<div class="expanded" id="expanded_{{ range.range_ID }}" hidden>
  <button class="collapse_variations" id="collapse_{{ range.range_ID }}">
    Hide {{ range.product_set.count }} Variations &#9650;
  </button>
  <table class="variation_table">
    <tr>
      <th>SKU</th>
      <th>Supplier SKU</th>
      {% for option in range.variation_options %}
      <th>{{ option }}</th>
      {% endfor %}
      {% for option in range.listing_options %}
      <th class="listing_option">{{ option }}</th>
      {% endfor %}
      <th></th>
    </tr>
    {% for product in range.product_set.all %}
    <tr>
      <td class="sku">{{ product.SKU }}</td>
      <td class="sku">{{ product.supplier_SKU }}</td>
      {% for option, value in product.variation.items %}
      <td class="name">{{ value }}</td>
      {% endfor %}
      {% for option, value in product.listing_options.items %}
      <td class="listing_option name">{{ value }}</td>
      {% endfor %}
      <td>
        <a href="{% url 'inventory:product' product.product_ID %}">
          <button>Edit</button>
        </a>
      </td>
    </tr>
    {% endfor %}
  </table>
</div>
