{% extends "inventory/range_settings.html" %}
{% load staticfiles %}
{% load inventory_extras %}

{% block additional_head %}
{{ block.super }}
<script src="{% static 'scripts/stock_manager.js' %}"></script>
<link rel="stylesheet" href="{% static 'scripts/selectize/selectize.css' %}">
<script src="{% static 'scripts/selectize/selectize.js' %}"></script>
<script>{% include 'product_editor/widgets/product_widgets.js' %}</script>
{% endblock %}

{% block page_title %}Product Locations{% endblock %}

{% block content %}{{ block.super }}

<form action="" method="POST">{% csrf_token %}
    {{ bay_formset.management_form }}
    <table>
        {% for field in department_form %}
        <tr>
            <th><label for="{{ field.name }}">{{ field.label}}</label></th>
            <td colspan="2">{{ field }}</td>
        </tr>
        {% endfor %}
        <tr>
            <th>Product</th>
            <th>Stock Level</th>
            <th>Bays</th>
        </tr>
        {% for form in bay_formset %}
        <tr hidden><td>{{ form.product_id }}</td></tr>
        <tr>
            <td class="title_field">{{ form.product_name.value }}</td>
            <td class="stock_level_field">{{ form.stock_level.value }}</td>
            <td class="location_field">{{ form.locations }}</td>
            {% if form.errors %}<td>{% for field in form %}{{ field.errors }}{% endfor %}</td>{% endif %}
        </tr>
        {% endfor %}
    </table>
    <input type="submit" value="Update Locations" />
</form>

{% endblock %}
